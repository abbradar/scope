# Проект "Разработка драйвера USB-осциллографа под Linux"

## Техническое задание
Проект представляет собой комплекс из модуля ядра Linux 3.0, который будет
осуществлять настройку и работу с USB-осциллографом Velleman PCSGU250, и
программы пользовательского режима, которая будет представлять данные с
осциллографа в виде графика и интерфейс для его настройки.

## Обоснование разработки
Для упомянутого осциллографа существует достаточно развитое программное обеспечение
для работы с ним в ОС Windows. Однако, разработчики не предоставляют каких-либо
средств для работы с ним под ОС Linux, которая является основной ОС автора.
Разработка такого комплекса позволила бы проводить больше работы в основной ОС.
К тому же, такой проект будет полезен другим пользователям ОС Linux, владеющим
этим осциллографом. Следует отметить, что сотрудники фирмы-разработчика осциллографа
охотно идут на контакт и предоставляют необходимые для разработки материалы, что
позволяет работать над проектом гораздо эффективнее, используя в меньшей степени
средства обратной разработки.

## Общая информация

Комплекс будет состоять из двух частей:

* Модуль ядра Linux 3.0.
* Программа режима задачи с графическим интерфейсом пользователя.

### Модуль ядра
Модуль ядра будет использовать средства подсистемы USB ядра Linux для установки
соединения с осциллографом. Он будет предоставлять файл-устройство, из которого
можно будет считывать данные с осциллографа (read), записывать данные в генератор
(write) и управлять параметрами осциллографа (ioctl).  Он будет заниматься также
предобработкой данных с осциллографа и предоставлять наружу данные в удобном
для работы формате. Примеры разработки таких модулей и прототипы есть в
документации ядра Linux. Модуль предполагается писать исходя из знаний, полученных
при работе над прототипом.

### Программа режима задачи
Программа должна будет взаимодействовать с модулем ядра через файл-устройство,
предоставлять форму, в которой можно будет устанавливать параметры устройства,
запускать/останавливать генератор и осциллограф. Полученные данные будут
отображаться в виде графика на экране. Программа должна будет выполнять минимум
работы по преобразованию данных от осциллографа; эту работу должен будет выполнять
модуль ядра, а программа будет служить лишь интерфейсом для работы с ним.

## Работа с осциллографом
Для управления с осциллографом есть специальный протокол взаимодействия. От
разработчиков устройства была получена техническая документация по работе с
устройством на финском языке, которую предполагается перевести на английский
и работать с устройством по ней. Некоторые моменты, не отражённые в документации,
предполагается изучать, используя USB-сниффер и отслеживая работу оригинального
программного обеспечения, прилагающегося к устройству.

## Прототипирование
Для проверки документации и возможностей устройства предполагается перед написанием
собственно проекта опробовать работу с устройством с помощью прототипа. Прототип
будет написан на языке Python с использованием библиотеки libusb, которая
позволяет работать с USB-устройствами в Linux без написания модуля ядра.
Прототип должен будет поддерживать (с ограниченной функциональностью) все те
функции, которые предоставляет устройство. Это необходимо из-за отсутствия полной
документации по работе с устройством на понимаемом языке, и ошибках и неточностях
в имеющейся документации.
